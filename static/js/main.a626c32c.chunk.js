(this["webpackJsonpvideo-recorder"]=this["webpackJsonpvideo-recorder"]||[]).push([[0],{17:function(e,t,n){e.exports=n(29)},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(13),c=n.n(i),o=n(11),s=n(2),d=n.n(s),u=n(3),l=n(16),m=n(4),p=n(5),g=n(7),f=n(6),v=n(14),h=n.n(v),E=n(15),R=n(10),b=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={selectedIndex:0,open:!1},e.options=["High Quality (VP9)","Medium Quality (H.264)"],e.componentDidMount=function(){return e.props.select(e.options[0])},e.select=function(t){e.setState({selectedIndex:t,open:!1}),e.props.select(e.options[t])},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"dropdown"},a.a.createElement("div",{className:"dropdown__selected",onClick:function(){return e.setState({open:!e.state.open})}},a.a.createElement("div",null,this.options[this.state.selectedIndex]),a.a.createElement(E.a,{icon:this.state.open?R.b:R.a})),this.state.open&&a.a.createElement("div",{className:"dropdown__options"},this.options.map((function(t,n){return a.a.createElement("div",{className:"dropdown__option",key:n,onClick:function(){return e.select(n)}},t)}))))}}]),n}(r.Component),S=function(e){var t=e.startRecording,n=e.recordingSettings,r=e.setRecordingSettings;return a.a.createElement("div",{className:"app"},a.a.createElement("div",{className:"options"},a.a.createElement("div",{className:"options__title"},"Options"),a.a.createElement("div",{className:"input-field"},a.a.createElement("div",{className:"input-field__name"},"Width"),a.a.createElement("div",{className:"input-field__description"},"Determines the width of the resolution."),a.a.createElement("input",{className:"input-field__input",placeholder:"native",value:n.width,onChange:function(e){return r({width:e.target.value})}})),a.a.createElement("div",{className:"input-field"},a.a.createElement("div",{className:"input-field__name"},"Height"),a.a.createElement("div",{className:"input-field__description"},"Determines the height of the resolution."),a.a.createElement("input",{className:"input-field__input",placeholder:"native",value:n.height,onChange:function(e){return r({height:e.target.value})}})),a.a.createElement("div",{className:"input-field"},a.a.createElement("div",{className:"input-field__name"},"FPS"),a.a.createElement("div",{className:"input-field__description"},"Determines the FPS."),a.a.createElement("input",{className:"input-field__input",placeholder:"native",value:n.frameRate,onChange:function(e){return r({frameRate:e.target.value})}})),a.a.createElement("div",{className:"dropdown-field"},a.a.createElement("div",{className:"input-field__name"},"Video Encoding (Quality)"),a.a.createElement("div",{className:"input-field__description"},"Determines the video encoding (compression) which affects the video quality."),a.a.createElement(b,{select:function(e){return r({profile:e})}})),a.a.createElement("hr",null)),a.a.createElement("div",{className:"buttons"},a.a.createElement("div",{className:"button",onClick:function(){return t()}},"Start Recording")))},w=function(e){var t=e.getRecordingTime,n=e.stopRecording,r=e.finished,i=e.recordingProfile,c=e.recordingSettings;return a.a.createElement("div",{className:"app"},a.a.createElement("video",{id:"video",autoPlay:!0,muted:!0}),a.a.createElement("div",{className:"video-caption"},!r&&a.a.createElement("div",null,i," | ",c.frameRate," FPS | ",c.width,"x",c.height),!r&&a.a.createElement("div",null,"RECORDING... ",t(),"s"),r&&a.a.createElement("div",null,"RECORDING ENDED: Clip duration: ",t(),"s")),a.a.createElement("div",{className:"buttons"},!r&&a.a.createElement("div",{className:"button",onClick:function(){return n()}},"Stop Recording")))},N='video/webm; codecs="vp9, opus',_='video/webm; codecs="h264, opus',y=['video/webm; codecs="vp8, opus"',"video/webm"],T=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={recording:!1,finished:!1,startTime:0,currentTime:0,recordingSettings:{profile:"",width:"",height:"",frameRate:""}},e.chunks=[],e.stream=null,e.recorder=null,e.getCurrentTime=function(){return Math.floor(Date.now()/1e3)},e.getRecordingConfig=function(){var t="";if("High Quality (VP9)"===e.state.recordingSettings.profile?t=N:"Medium Quality (H.264)"===e.state.recordingSettings.profile&&(t=_),!MediaRecorder.isTypeSupported(t)){var n,r=Object(l.a)(y);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(MediaRecorder.isTypeSupported(a)){t=a;break}}}catch(i){r.e(i)}finally{r.f()}}return t},e.getValidatedRecordingSetting=function(e){return""===e||isNaN(Number(e))||Number(e)<=0?void 0:Number(e)},e.getVideoTrackSettings=function(){return null!==e.stream&&e.stream.getVideoTracks().length>0?e.stream.getVideoTracks()[0].getSettings():{}},e.startRecording=Object(u.a)(d.a.mark((function t(){var n,r,a,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.recordingSettings,r=n.width,a=n.height,i=n.frameRate,t.next=3,navigator.mediaDevices.getDisplayMedia({video:{width:e.getValidatedRecordingSetting(r),height:e.getValidatedRecordingSetting(a),frameRate:e.getValidatedRecordingSetting(i)},audio:!0});case 3:e.stream=t.sent,e.recorder=new MediaRecorder(e.stream,{mimeType:e.getRecordingConfig()}),e.recorder.start(),e.recorder.ondataavailable=function(t){return e.chunks.push(t.data)},e.recorder.onstop=Object(u.a)(d.a.mark((function t(){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Blob(e.chunks),t.next=3,e.loadDurationMetadata(URL.createObjectURL(n));case 3:t.t0=t.sent,r=1e3*t.t0,h()(n,r,(function(t){return e.createDownloadButton(URL.createObjectURL(t))})),clearInterval(e.timer),null!==e.stream&&(e.stream.getTracks().forEach((function(e){return e.stop()})),e.stream=null),e.setState({recording:!1,finished:!0});case 9:case"end":return t.stop()}}),t)}))),e.setState({recording:!0,startTime:e.getCurrentTime()}),document.getElementById("video").srcObject=e.stream,e.timer=setInterval((function(){return e.setState({currentTime:e.getCurrentTime()})}),1e3);case 11:case"end":return t.stop()}}),t)}))),e.loadDurationMetadata=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=document.getElementById("video");n.srcObject=null,n.src=t,n.onloadedmetadata=function(){n.duration===1/0&&(n.currentTime=1e101,n.ontimeupdate=function(){e(n.duration),n.currentTime=0,n.src=null})}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.createDownloadButton=function(e){var t=document.createElement("a");document.querySelector(".buttons").appendChild(t),t.classList.add("button"),t.href=e,t.download="video.webm",t.innerText="Save Recording"},e.stopRecording=Object(u.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.recorder.stop());case 1:case"end":return t.stop()}}),t)}))),e.getRecordingTime=function(){return Math.max(0,e.state.currentTime-e.state.startTime)},e.setRecordingSettings=function(t){return e.setState({recordingSettings:Object(o.a)(Object(o.a)({},e.state.recordingSettings),t)})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return this.state.recording||this.state.finished?a.a.createElement(w,{finished:this.state.finished,recordingProfile:this.state.recordingSettings.profile,recordingSettings:this.getVideoTrackSettings(),getRecordingTime:function(){return e.getRecordingTime()},stopRecording:function(){return e.stopRecording()}}):a.a.createElement(S,{startRecording:function(){return e.startRecording()},recordingSettings:this.state.recordingSettings,setRecordingSettings:function(t){return e.setRecordingSettings(t)}})}}]),n}(r.Component);n(28);c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(T,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.a626c32c.chunk.js.map