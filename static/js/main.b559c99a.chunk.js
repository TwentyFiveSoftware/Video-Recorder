(this["webpackJsonpvideo-recorder"]=this["webpackJsonpvideo-recorder"]||[]).push([[0],{10:function(e,t,r){e.exports=r(17)},16:function(e,t,r){},17:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(4),o=r.n(c),i=r(1),u=r.n(i),s=r(2),d=r(5),l=r(6),m=r(9),p=r(8),f=function(e){var t=e.startRecording;return a.a.createElement("div",{className:"app"},a.a.createElement("div",{className:"button",onClick:function(){return t()}},"Start Recording"))},v=function(e){var t=e.getRecordingTime,r=e.stopRecording,n=e.finished;return a.a.createElement("div",{className:"app"},a.a.createElement("video",{id:"video",autoPlay:!0,muted:!0}),n?a.a.createElement("div",null,"RECORDING ENDED: Clip duration: ",t(),"s"):a.a.createElement("div",null,"RECORDING... ",t(),"s"),a.a.createElement("div",{className:"buttons"},!n&&a.a.createElement("div",{className:"button",onClick:function(){return r()}},"Stop Recording")))},g=r(7),h=r.n(g),b=['video/webm; codecs="vp9, opus"','video/webm; codecs="vp8, opus"',"video/webm"],R=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(d.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={recording:!1,finished:!1,startTime:0,currentTime:0},e.chunks=[],e.stream=null,e.recorder=null,e.getCurrentTime=function(){return Math.floor(Date.now()/1e3)},e.startRecording=Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});case 2:e.stream=t.sent,e.recorder=new MediaRecorder(e.stream,{mimeType:b.find((function(e){return MediaRecorder.isTypeSupported(e)}))}),e.recorder.start(),e.recorder.ondataavailable=function(t){return e.chunks.push(t.data)},e.recorder.onstop=Object(s.a)(u.a.mark((function t(){var r,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Blob(e.chunks),t.next=3,e.loadDurationMetadata(URL.createObjectURL(r));case 3:t.t0=t.sent,n=1e3*t.t0,h()(r,n,(function(t){return e.createDownloadButton(URL.createObjectURL(t))})),clearInterval(e.timer),null!==e.stream&&(e.stream.getTracks().forEach((function(e){return e.stop()})),e.stream=null),e.setState({recording:!1,finished:!0});case 9:case"end":return t.stop()}}),t)}))),e.setState({recording:!0,startTime:e.getCurrentTime()}),document.getElementById("video").srcObject=e.stream,e.timer=setInterval((function(){return e.setState({currentTime:e.getCurrentTime()})}),1e3);case 10:case"end":return t.stop()}}),t)}))),e.loadDurationMetadata=function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=document.getElementById("video");r.srcObject=null,r.src=t,r.onloadedmetadata=function(){r.duration===1/0&&(r.currentTime=1e101,r.ontimeupdate=function(){e(r.duration),r.currentTime=0,r.src=null})}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.createDownloadButton=function(e){var t=document.createElement("a");document.querySelector(".buttons").appendChild(t),t.classList.add("button"),t.href=e,t.download="video.webm",t.innerText="Save Recording"},e.stopRecording=Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.recorder.stop());case 1:case"end":return t.stop()}}),t)}))),e.getRecordingTime=function(){return Math.max(0,e.state.currentTime-e.state.startTime)},e}return Object(l.a)(r,[{key:"render",value:function(){var e=this;return this.state.recording||this.state.finished?a.a.createElement(v,{finished:this.state.finished,getRecordingTime:function(){return e.getRecordingTime()},stopRecording:function(){return e.stopRecording()}}):a.a.createElement(f,{startRecording:function(){return e.startRecording()}})}}]),r}(n.Component);r(16);o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(R,null)),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.b559c99a.chunk.js.map