(this["webpackJsonpvideo-recorder"]=this["webpackJsonpvideo-recorder"]||[]).push([[0],{15:function(e,t,r){},16:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(4),i=r.n(c),o=r(1),s=r.n(o),d=r(2),u=r(5),l=r(6),m=r(8),p=r(7),v=['video/webm; codecs="vp9, opus"','video/webm; codecs="vp8, opus"',"video/webm"],f=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(u.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={recording:!1,finished:!1,startTime:0,currentTime:0},e.chunks=[],e.stream=null,e.recorder=null,e.getCurrentTime=function(){return Math.floor(Date.now()/1e3)},e.startRecording=Object(d.a)(s.a.mark((function t(){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={video:!0,audio:!0},t.next=3,navigator.mediaDevices.getDisplayMedia(r);case 3:e.stream=t.sent,e.recorder=new MediaRecorder(e.stream,{mimeType:v.find((function(e){return MediaRecorder.isTypeSupported(e)}))}),e.recorder.start(),e.recorder.ondataavailable=function(t){return e.chunks.push(t.data)},e.recorder.onstop=function(t){var r=new Blob(e.chunks,{type:v});e.downloadBlob(r)},e.setState({recording:!0,startTime:e.getCurrentTime()}),document.getElementById("video").srcObject=e.stream,e.timer=setInterval((function(){return e.setState({currentTime:e.getCurrentTime()})}),1e3);case 11:case"end":return t.stop()}}),t)}))),e.downloadBlob=function(e){var t=URL.createObjectURL(e),r=document.createElement("a");document.querySelector(".buttons").appendChild(r),r.classList.add("button"),r.href=t,r.download="video.webm",r.innerText="Save Recording"},e.stopRecording=Object(d.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e.stream){t.next=2;break}return t.abrupt("return");case 2:clearInterval(e.timer),e.recorder.stop(),e.stream.getTracks().forEach((function(e){return e.stop()})),e.stream=null,document.getElementById("video").srcObject=null,e.setState({recording:!1,finished:!0});case 8:case"end":return t.stop()}}),t)}))),e.getRecordingTime=function(){return Math.max(0,e.state.currentTime-e.state.startTime)},e}return Object(l.a)(r,[{key:"render",value:function(){var e=this;return this.state.recording||this.state.finished?a.a.createElement("div",{className:"app"},a.a.createElement("video",{id:"video",autoPlay:!0,muted:!0}),this.state.finished?a.a.createElement("div",null,"RECORDING ENDED: Clip duration: ",this.getRecordingTime(),"s"):a.a.createElement("div",null,"RECORDING... ",this.getRecordingTime(),"s"),a.a.createElement("div",{className:"buttons"},!this.state.finished&&a.a.createElement("div",{className:"button",onClick:function(){return e.stopRecording()}},"Stop Recording"))):a.a.createElement("div",{className:"app"},a.a.createElement("div",{className:"buttons"},a.a.createElement("div",{className:"button",onClick:function(){return e.startRecording()}},"Start Recording")))}}]),r}(n.Component);r(15);i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(f,null)),document.getElementById("root"))},9:function(e,t,r){e.exports=r(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.ed7300b7.chunk.js.map